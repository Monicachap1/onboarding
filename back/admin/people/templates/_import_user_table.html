{% load i18n %}
{% load general %}
{% load crispy_forms_tags %}
<table class="table card-table table-vcenter text-nowrap">
  <thead>
    <tr>
      <th></th>
      <th>{% translate "First name" %}</th>
      <th>{% translate "Last name" %}</th>
      <th>{% translate "Email" %}</th>
      <th></th>
      <th>Role</th>
    </tr>
  </thead>
  <tbody id="results" style="white-space: normal">
    {% for user in users %}
      <tr id="hash-{{user.email|hash}}">
        <td class="w-1 pe-0">
          <input type="checkbox" class="form-check-input m-0 align-middle" aria-label="Select user" checked="">
        </td>
        <td>
          {{ user.first_name }}
        </td>
        <td>
          {{ user.last_name }}
        </td>
        <td>
          {{ user.email }}
        </td>
        <td class="text-end">
          <a hx-confirm="Are you sure? This cannot be reversed. You will have to create the user manually if you would want to add them later" hx-post="{% url 'people:import-ignore-hx' %}" hx-vals='{"email": "{{user.email}}"}' hx-target="#hash-{{user.email|hash}}" hx-swap="outerHTML" class="btn btn-white">
            {% translate "Don't show this user again" %}
          </a>
        </td>
        <td class="role">
          {{ role_form|crispy }}
        </td>
      </tr>
    {% empty %}
      {% if not error %}
        <tr>
          <td colspan="6">{% translate "No users found" %}</td>
        </tr>
      {% else %}
        <tr class="table-danger">
          <td colspan="6">{{ error }}</td>
        </tr>
      {% endif %}
    {% endfor %}
  </tbody>
</table>

